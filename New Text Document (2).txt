import RPi.GPIO as GPIO
import time

MQ3_D0_PIN = 18 # Using GPIO 18 (Physical Pin 12) for the digital signal

# --- Setup ---
GPIO.setmode(GPIO.BCM)
# Set pin as input and enable pull-up resistor for stability
GPIO.setup(MQ3_D0_PIN, GPIO.IN, pull_up_down=GPIO.PUD_UP) 

try:
    print("--- MQ-3 Digital (D0) Monitor ---")
    print("Adjust the potentiometer on the MQ-3 board to set the trigger point.")
    print("Press CTRL+C to stop.\n")
    
    while True:
        # Read the state of the D0 pin
        d0_state = GPIO.input(MQ3_D0_PIN)
        
        # NOTE: Digital outputs can be active HIGH or active LOW.
        # This checks for a typical Active LOW trigger (where LOW means alarm ON)
        if d0_state == GPIO.LOW:
            status = "!!! ALARM TRIGGERED !!!"
        else:
            status = "Safe (Below D0 Threshold)"
            
        print(f"D0 State: {'LOW' if d0_state == GPIO.LOW else 'HIGH'} | {status}")
        time.sleep(0.5)

except KeyboardInterrupt:
    print("\nDigital monitoring stopped.")
finally:
    GPIO.cleanup()
